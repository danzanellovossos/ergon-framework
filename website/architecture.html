<!--
AUTO-GENERATED FILE
Source: docs/architecture.md
DO NOT EDIT MANUALLY
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture ‚Äî Ergon Framework</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0e14;
            --bg-card: #111820;
            --accent-cyan: #39bae6;
            --accent-orange: #ff8f40;
            --accent-green: #7fd962;
            --accent-magenta: #f07178;
            --accent-yellow: #ffb454;
            --accent-purple: #d2a6ff;
            --text-primary: #e6e6e6;
            --text-secondary: #6e7a8a;
            --text-muted: #3d4752;
            --border: #1f2833;
            --glow-cyan: rgba(57, 186, 230, 0.15);
            --glow-orange: rgba(255, 143, 64, 0.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Outfit', -apple-system, sans-serif; background: var(--bg-dark); color: var(--text-primary); line-height: 1.7; }

        .bg-pattern {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1;
            background-image: 
                radial-gradient(circle at 20% 20%, var(--glow-cyan) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, var(--glow-orange) 0%, transparent 50%),
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 100% 100%, 100% 100%, 60px 60px, 60px 60px;
        }

        nav { position: fixed; top: 0; left: 0; right: 0; background: rgba(10, 14, 20, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); z-index: 1000; padding: 1rem 2rem; }
        .nav-inner { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
        .nav-logo { display: flex; align-items: center; text-decoration: none; }
        .nav-logo img { height: 32px; width: auto; }
        .nav-links { display: flex; gap: 2rem; list-style: none; }
        .nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 0.95rem; transition: color 0.3s; }
        .nav-links a:hover, .nav-links a.active { color: var(--accent-cyan); }

        .page-hero { padding: 8rem 2rem 4rem; text-align: center; position: relative; }
        .page-hero::before { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 600px; height: 600px; background: radial-gradient(circle, var(--glow-cyan) 0%, transparent 70%); opacity: 0.3; }

        .hero-icon { width: 80px; height: 80px; background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green)); border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; margin: 0 auto 1.5rem; position: relative; z-index: 1; }
        .page-hero h1 { font-size: clamp(2.5rem, 6vw, 4rem); font-weight: 800; letter-spacing: -0.03em; margin-bottom: 1rem; position: relative; z-index: 1; }
        .page-hero p { font-size: 1.25rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto; position: relative; z-index: 1; }

        .content { max-width: 900px; margin: 0 auto; padding: 2rem; }
        .content h2 { font-size: 1.75rem; font-weight: 700; margin: 3rem 0 1.5rem; color: var(--accent-cyan); }
        .content p { margin-bottom: 1.25rem; color: var(--text-secondary); }
        .content ul { margin-bottom: 1.5rem; padding-left: 1.5rem; color: var(--text-secondary); }
        .content li { margin-bottom: 0.5rem; }
        .content strong { color: var(--text-primary); }

        .layers-container { display: flex; flex-direction: column; gap: 1rem; margin: 2rem 0; }

        .layer { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; transition: all 0.3s; position: relative; overflow: hidden; }
        .layer:hover { transform: translateX(8px); }
        .layer::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; }

        .layer-platform::before { background: var(--accent-purple); }
        .layer-integration::before { background: var(--accent-orange); }
        .layer-domain::before { background: var(--accent-cyan); }
        .layer-core::before { background: var(--accent-green); }

        .layer-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem; flex-wrap: wrap; }
        .layer-number { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.1rem; }

        .layer-platform .layer-number { background: rgba(210, 166, 255, 0.15); color: var(--accent-purple); }
        .layer-integration .layer-number { background: rgba(255, 143, 64, 0.15); color: var(--accent-orange); }
        .layer-domain .layer-number { background: rgba(57, 186, 230, 0.15); color: var(--accent-cyan); }
        .layer-core .layer-number { background: rgba(127, 217, 98, 0.15); color: var(--accent-green); }

        .layer-name { font-size: 1.25rem; font-weight: 600; }
        .layer-components { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-left: auto; }
        .layer-tag { font-size: 0.75rem; font-weight: 500; padding: 0.3rem 0.75rem; background: rgba(255,255,255,0.05); border-radius: 6px; font-family: 'JetBrains Mono', monospace; }
        .layer-description { color: var(--text-secondary); font-size: 0.95rem; padding-left: 3.5rem; }

        .principle-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin: 2rem 0; }
        .principle-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; }
        .principle-card h4 { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem; }
        .principle-card p { font-size: 0.95rem; color: var(--text-secondary); margin: 0; }

        .comparison-table { width: 100%; border-collapse: collapse; margin: 2rem 0; background: var(--bg-card); border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
        .comparison-table th, .comparison-table td { padding: 1rem 1.25rem; text-align: left; }
        .comparison-table th { background: var(--bg-dark); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); }
        .comparison-table td { border-top: 1px solid var(--border); font-size: 0.95rem; }
        .comparison-table td:first-child { font-weight: 500; color: var(--accent-cyan); }
        .comparison-table .old { color: var(--text-muted); }
        .comparison-table .new { color: var(--accent-green); }

        footer { text-align: center; padding: 3rem 2rem; border-top: 1px solid var(--border); margin-top: 4rem; }
        .footer-links { display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap; }
        .footer-links a { color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; }
        .footer-links a:hover { color: var(--accent-cyan); }

        @media (max-width: 768px) { .nav-links { display: none; } .layer-description { padding-left: 0; } .layer-components { width: 100%; margin-left: 0; margin-top: 0.75rem; } }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>

    <nav>
        <div class="nav-inner">
            <a href="index.html" class="nav-logo"><img src="logo.png" alt="Ergon Framework"></a>
            <ul class="nav-links">
                <li><a href="architecture.html" class="active">Architecture</a></li>
                <li><a href="transaction.html">Transaction</a></li>
                <li><a href="task.html">Tasks</a></li>
                <li><a href="connector.html">Connectors</a></li>
                <li><a href="service.html">Services</a></li>
                <li><a href="telemetry.html">Telemetry</a></li>
            </ul>
        </div>
    </nav>

    <section class="page-hero">
        <div class="hero-icon">üèóÔ∏è</div>
        <h1>Architecture</h1>
        <p>A transaction-centric, layered architecture that enforces strict separation between business logic and infrastructure.</p>
    </section>

    <div class="content">
        <h2>The Core Philosophy</h2>
        <p>
            Building reliable data processing systems is hard. Developers often find themselves tangled in retry logic, connection management, error handling, and observability‚Äîall mixed into the same codebase as business logic.
        </p>
        <p>
            Ergon solves this by enforcing a strict architectural separation between <strong>what</strong> your code does (business logic) and <strong>how</strong> it interacts with the world (protocols, transports, retries, observability).
        </p>

        <h2>Four Layers, One Purpose</h2>
        <p>Dependencies flow inward. Infrastructure never leaks into domain logic. Each layer has a single responsibility.</p>

        <div class="layers-container">
            <div class="layer layer-platform">
                <div class="layer-header">
                    <div class="layer-number">4</div>
                    <div class="layer-name">Platform Layer</div>
                    <div class="layer-components">
                        <span class="layer-tag">Runner</span>
                        <span class="layer-tag">Policies</span>
                        <span class="layer-tag">Telemetry</span>
                    </div>
                </div>
                <p class="layer-description">Orchestrates execution, manages configuration, and provides observability. You configure it‚Äîthe framework executes.</p>
            </div>

            <div class="layer layer-integration">
                <div class="layer-header">
                    <div class="layer-number">3</div>
                    <div class="layer-name">Integration Layer</div>
                    <div class="layer-components">
                        <span class="layer-tag">Connectors</span>
                        <span class="layer-tag">Services</span>
                    </div>
                </div>
                <p class="layer-description">Bridges your code to the outside world. Connectors handle transaction flow; Services handle protocol mechanics.</p>
            </div>

            <div class="layer layer-domain">
                <div class="layer-header">
                    <div class="layer-number">2</div>
                    <div class="layer-name">Domain Layer</div>
                    <div class="layer-components">
                        <span class="layer-tag">Tasks</span>
                        <span class="layer-tag">Mixins</span>
                    </div>
                </div>
                <p class="layer-description">Pure business logic. No I/O, no retries, no protocol details. Just transformations, validations, and decisions.</p>
            </div>

            <div class="layer layer-core">
                <div class="layer-header">
                    <div class="layer-number">1</div>
                    <div class="layer-name">Core Layer</div>
                    <div class="layer-components">
                        <span class="layer-tag">Transaction</span>
                    </div>
                </div>
                <p class="layer-description">The atomic, immutable unit of work. Every component speaks this language.</p>
            </div>
        </div>

        <h2>Key Principles</h2>

        <div class="principle-grid">
            <div class="principle-card">
                <h4>üì¶ Transaction-First</h4>
                <p>Everything revolves around the Transaction‚Äîan immutable, atomic unit of work with a unique ID for tracing.</p>
            </div>
            <div class="principle-card">
                <h4>üß™ Testable by Design</h4>
                <p>Tasks contain only pure business logic. Test with plain Transaction objects‚Äîno mocks for HTTP clients.</p>
            </div>
            <div class="principle-card">
                <h4>üîå Transport Agnostic</h4>
                <p>Switch from RabbitMQ to Kafka without touching business logic. Just swap the connector.</p>
            </div>
            <div class="principle-card">
                <h4>üéõÔ∏è Policy-Driven</h4>
                <p>Configure retries, timeouts, concurrency, and batching via policies‚Äînot code changes.</p>
            </div>
            <div class="principle-card">
                <h4>üìä Observable by Default</h4>
                <p>OpenTelemetry native. Every transaction generates logs, metrics, and traces automatically.</p>
            </div>
            <div class="principle-card">
                <h4>‚ôæÔ∏è Infinitely Scalable</h4>
                <p>The framework imposes no ceiling. Scale horizontally, vertically, or via connector partitioning.</p>
            </div>
        </div>

        <h2>Traditional vs. Ergon</h2>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Concern</th>
                    <th>Traditional</th>
                    <th>Ergon</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Business Logic</td>
                    <td class="old">Mixed with I/O, retries, errors</td>
                    <td class="new">Isolated in Tasks‚Äîpure and testable</td>
                </tr>
                <tr>
                    <td>Retries</td>
                    <td class="old">Ad-hoc, inconsistent</td>
                    <td class="new">Centralized in Policies</td>
                </tr>
                <tr>
                    <td>Observability</td>
                    <td class="old">Manual, often forgotten</td>
                    <td class="new">Automatic‚Äîevery transaction traced</td>
                </tr>
                <tr>
                    <td>Transport Changes</td>
                    <td class="old">Refactor business logic</td>
                    <td class="new">Swap Connector, logic unchanged</td>
                </tr>
                <tr>
                    <td>Testing</td>
                    <td class="old">Mocks everywhere</td>
                    <td class="new">Plain Transaction objects</td>
                </tr>
                <tr>
                    <td>Error Handling</td>
                    <td class="old">Try/except everywhere</td>
                    <td class="new">Structured lifecycle hooks</td>
                </tr>
            </tbody>
        </table>

        <h2>Learn More</h2>
        <ul>
            <li><a href="transaction.html" style="color: var(--accent-cyan);">Transaction</a> ‚Äî The atomic, immutable unit of work</li>
            <li><a href="task.html" style="color: var(--accent-cyan);">Tasks</a> ‚Äî Pure business logic with mixins</li>
            <li><a href="connector.html" style="color: var(--accent-cyan);">Connectors</a> ‚Äî The transaction gateway</li>
            <li><a href="service.html" style="color: var(--accent-cyan);">Services</a> ‚Äî Protocol mechanics and resilience</li>
            <li><a href="telemetry.html" style="color: var(--accent-cyan);">Telemetry</a> ‚Äî Logs, metrics, and traces</li>
        </ul>
    </div>

    <footer>
        <div class="footer-links">
            <a href="index.html">Home</a>
            <a href="transaction.html">Transaction</a>
            <a href="task.html">Tasks</a>
            <a href="connector.html">Connectors</a>
            <a href="service.html">Services</a>
            <a href="telemetry.html">Telemetry</a>
        </div>
    </footer>
</body>
</html>

